<h1><%= @topic.name %></h1>

<table>
  <tr>
    <td>Date:</td>
    <td><%= @topic.publish_date %></td>
  </tr>
  <tr>
    <td>Summary:</td>
    <td><%= simple_format("#{@topic.summary}") %></td>
  </tr>
</table>

<%= link_to "Edit", edit_topic_path(@topic) %><br>
<%= link_to "Back to Topic list", topics_path %>
<%#= link_to "Add post", new_topic_post_path(@topic) %>

<hr>

<table>
  <thead>
    <tr>
      <td>Platform</td>
      <td>Content</td>
      <td>Status</td>
      <td>Posted on</td>
    </tr>
  </thead>
  <tbody>
  <% @topic.posts.each do |post| %>
    <tr class="post-row" id="<%= dom_id(post) %>">
      <td><%= post.platform.name if post.platform %></td>
      <td class="content"><%= post.content %></td>
      <td><%= post.status %></td>
      <td><%= post.posted_on %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<hr>

<%#= render 'posts/form' %>

<%= form_for Post.new(topic_id: @topic.id) do |f| %>
  <%= f.hidden_field :topic_id %>
  <%= f.label :content %>:
  <%= f.text_area :content %><br>
  <%= f.label :posted_on %>:
  <%= f.date_field :posted_on %><br>
  <%= f.label :platform %>
  <%= f.collection_select(:platform_id, Platform.all, :id, :name) %>
  <br>
  <%= f.submit "Add post" %>
<% end %>